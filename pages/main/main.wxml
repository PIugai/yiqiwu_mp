<!-- navbar -->
<view class="navbar">
 <CustomNav >
    <view class='pair'>
    <view class='button'>
      <view wx:if="{{!(map)}}">
        <button type="default" bindtap="selectMap" class="toggle-button">MAP</button>
      </view>
      </view>


    <image id='logo' mode="aspectFit" src="/image/logo.png" />
    </view>
  </CustomNav>
</view>

<view class="page-container">

  <!-- filters -->
  <view wx-if="{{showFilter}}" class="filter-container">
    <view wx:for="{{wxFilter}}" wx:for-item="button">
      <button bindtap="filterActivity" data-activity="{{button.activity}}" class="{{button.active}}" ><image src="{{button.src}}" class="image-filter"></image></button>
    </view>
  </view>

    <!-- main content -->
  <view class="main-content">
    <button bindtap="showFilter" class="button-filter-toggle">FILTER</button>

    <!-- map view -->
    <view wx:if="{{map}}">
      <view class='button'>
        <view wx:if="{{map}}">
          <button type="default" bindtap="selectList" class="toggle-button">LIST</button>
        </view>
      

    </view>

      <view class="map-container">
        <map bindmarkertap="markertap" longitude="{{lg}}" latitude="{{lt}}" scale="{{sc}}" style="width: 100%; height: 65vh;" markers="{{filteredEvents}}"></map>

        <view wx:if="{{!(selectionMade)}}">
          <view class="display">
            <view class="cardtext-placeholder">
              <text>Choose a pin to view details</text>
            </view>
          </view>
        </view>

        <view wx:if="{{selectionMade}}">
          <view class="display" bindtap="showEvent" data-event="{{event.id}}">
            <view class="text-id">EVENT ID: {{event.id}}</view>
            <view class="text-activity">{{event.activity_type}}</view>
            <view class="location">{{event.location}} | {{event.date}} | {{event.start_time}} - {{event.end_time}}</view>
            </view>
          </view>
        </view>
  
    </view>
  </view>
</view>

<!-- list view -->
<!-- <view wx:if="{{!(map)}}">
    <view wx:for="{{filteredEvents}}" wx:for-item="event" wx:key="event.id" bindtap="showEvent" class="card" data-event="{{event.id}}">
      <view class="text-id">EVENT ID: {{event.id}}</view>
      <view class="text-activity">{{event.activity_type}}</view>
      <view class="location">{{event.location}} | {{event.date}} | {{event.start_time}} - {{event.end_time}}    </view>
    </view>
</view> -->

<view class="card-container" wx:if="{{!(map)}}">
  <view wx:for="{{filteredEvents}}" wx:for-item="event" wx:key="event.id" bindtap="showEvent" data-event="{{event.id}}">
    <view class="global-card" style='background-image: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.1)), url({{event.photo}})'>
      <view class="card-mid-block">
        <view class="card-info">
          <image class="card-icon" src="/image/calendar.png"></image>
          <text> {{event.date}}</text>
        </view>
        <view class="card-info">
          <image class="card-icon" src="/image/clock.png"></image>
          <text>{{event.start_time}}</text>
        </view>
        <view class="card-info">
          <image class="card-icon" src="/image/work-team.png"></image>
          <text>{{event.spots_filled}} / {{event.capacity}}</text>
        </view>
      </view>
      <view class="global-card-text-activity">{{event.activity_type}}</view>
      <view class="global-card-location">@{{event.location}}</view>
    </view>
  </view>
</view>
